# گزارش کار الگوریتم میانه میانه‌ها

## هدف پروژه

هدف از این گزارش، بررسی اصول نظری و مراحل عملی اجرای الگوریتم میانه میانه‌ها در زبان C در سطحی است که خواننده بدون مشاهده مستقیم کد بتواند با منطق و ساختار الگوریتم آشنا شود.

## شرح الگوریتم

1. **تقسیم به گروه‌های کوچک**
    
    - آرایه ورودی به زیرآرایه‌های با اندازه ثابت (معمولاً 5 عنصر) تقسیم می‌شود.
        
    - این تقسیم‌بندی باعث می‌شود که در هر سطح بازگشتی بتوان با اعمال مرتب‌سازی کوچک، میانه هر گروه را محاسبه کرد.
        
2. **یافتن میانه‌های گروه‌ها**
    
    - هر گروه با استفاده از یک مرتب‌سازی ساده (مانند qsort در C) به‌طور مجزا مرتب شده و میانه‌ی آن استخراج می‌شود.
        
    - مجموعه‌ای از این میانه‌ها تشکیل یک آرایه جدید می‌دهد.
        
3. **انتخاب محور (pivot)**
    
    - میانه‌های به‌دست‌آمده مجدداً با خود الگوریتم میانه میانه‌ها پردازش می‌شوند تا میانه آرایه میانه‌ها (pivot) انتخاب شود.
        
    - این انتخاب بازگشتی تضمین می‌کند که محور انتخابی تقریباً مرکز توزیع داده‌ها باشد.
        
4. **پارتیشن‌بندی آرایه اصلی**
    
    - آرایه ورودی نسبت به مقدار pivot به سه بخش «کوچکتر»، «مساوی» و «بزرگتر» تقسیم می‌شود.
        
    - بر اساس موقعیت k نسبت به اندازه‌ی بخش‌ها، مرحله بازگشتی بعدی در همان بخش اجرا خواهد شد.
        
5. **بازگشت بازگشتی**
    
    - اگر k دقیقاً معادل تعداد عناصر بخش کوچکتر باشد، مقدار pivot نتیجه است.
        
    - در غیر این صورت، الگوریتم روی بخش مناسب (کوچکتر یا بزرگتر) به‌صورت بازگشتی فراخوانی می‌شود.
        

## چالش‌ها و نکات اجرایی

- **حافظه پویا:** استفاده از تخصیص دینامیک (malloc/realloc) برای ذخیره موقت میانه‌ها و جلوگیری از تخصیص بیش‌ازحد حافظه.
    
- **مدیریت تقسیم‌ها:** اطمینان از اینکه در پایان هر مرحله اندازه‌ی زیرمسئله به حداقل می‌رسد تا عمق بازگشتی کنترل شود.
    
- **پیچیدگی مرتب‌سازی کوچک:** مرتب‌سازی گروه‌های با اندازه ثابت هزینه ثابتی دارد و بر مرتبه کلی تأثیر عمده نمی‌گذارد.
    

## نتیجه‌گیری

الگوریتم میانه میانه‌ها با ابداع راهکاری برای انتخاب محور قدرتمند و تقسیم‌بندی هوشمند، توانسته است در بدترین حالت نیز مرتبه‌ی اجرایی خطی ( O(n) ) را محقق کند. این ویژگی آن را برای کاربردهایی که نیازمند انتخاب k-امین عنصر بدون مرتب‌سازی کامل هستند، بسیار مناسب می‌سازد.

---

**مرتبه اجرایی اصلی:** O(n)

**شواهد سریع (Quick Proof):**

- در هر مرحله ابتدا آرایه به گروه‌های ۵تایی تقسیم و میانه‌ها در O(n) استخراج می‌شوند.
    
- انتخاب محور (median of medians) با حل بازگشتی بر روی تقریباً n/5 میانه انجام می‌شود: T(n/5).
    
- پارتیشن‌بندی آرایه نسبت به pivot نیز در O(n) صورت می‌گیرد.
    
- مرحله بازگشتی دوم روی حداکثر 7n/10 عنصر انجام می‌شود: T(7n/10).
    
- معادله بازگشتی کلی:
    
- با حل این معادله (مثلاً با روش درخت بازگشت) این نتیجه حاصل می‌شود که
- T(n) = O(n).